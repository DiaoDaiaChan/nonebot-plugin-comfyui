# èŠ‚ç‚¹æ§åˆ¶åŠŸèƒ½æ–‡æ¡£

## ç›®å½•

- [åŠŸèƒ½æ¦‚è¿°](#åŠŸèƒ½æ¦‚è¿°)
- [å‡†å¤‡å·¥ä½œ](#å‡†å¤‡å·¥ä½œ)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [è¦†å†™èŠ‚ç‚¹è¯¦è§£](#è¦†å†™èŠ‚ç‚¹è¯¦è§£)
- [é«˜çº§èŠ‚ç‚¹è¦†å†™æ“ä½œ](#é«˜çº§èŠ‚ç‚¹è¦†å†™æ“ä½œ)

---

## åŠŸèƒ½æ¦‚è¿°

### ä»€ä¹ˆæ˜¯èŠ‚ç‚¹æ§åˆ¶åŠŸèƒ½ï¼Ÿ

æœ¬æ’ä»¶æä¾›äº†è¯¦ç»†çš„æ§åˆ¶èŠ‚ç‚¹è¾“å…¥çš„åŠŸèƒ½ï¼Œå…è®¸ä½ åœ¨ä½¿ç”¨ ComfyUI å·¥ä½œæµæ—¶åŠ¨æ€è¦†å†™å’Œå®šåˆ¶å‚æ•°ã€‚

### ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªåŠŸèƒ½ï¼Ÿ

ComfyUI å¯¼å‡ºçš„å·¥ä½œæµ JSON æ–‡ä»¶ä¸­ï¼Œå‚æ•°é€šå¸¸æ˜¯å›ºå®šæ­»çš„ï¼ˆå¦‚ç§å­ã€åˆ†è¾¨ç‡ã€æ­¥æ•°ç­‰ï¼‰ã€‚é€šè¿‡æœ¬åŠŸèƒ½ï¼Œä½ å¯ä»¥ï¼š

- é€‰æ‹©å“ªäº›å‚æ•°å¯ä»¥åŠ¨æ€ä¿®æ”¹
- åœ¨è¿è¡Œæ—¶é‡æ–°è¾“å…¥åˆ†è¾¨ç‡ã€æ­¥æ•°ã€æç¤ºè¯ç­‰å‚æ•°
- ä¸ºä¸åŒåœºæ™¯é…ç½®ä¸åŒçš„é»˜è®¤å‚æ•°
- å®ç°æ›´çµæ´»çš„å·¥ä½œæµè°ƒç”¨æ–¹å¼

ä¾‹å¦‚ï¼šä¸€ä¸ªå›ºå®šçš„å·¥ä½œæµæ–‡ä»¶å¯èƒ½è®¾ç½®äº† 512x512 çš„åˆ†è¾¨ç‡ï¼Œä½†é€šè¿‡èŠ‚ç‚¹è¦†å†™åŠŸèƒ½ï¼Œä½ å¯ä»¥åœ¨è¿è¡Œæ—¶å°†å…¶ä¿®æ”¹ä¸º 768x768 æˆ–å…¶ä»–å°ºå¯¸ã€‚

---

## å‡†å¤‡å·¥ä½œ

åœ¨ä½¿ç”¨èŠ‚ç‚¹æ§åˆ¶åŠŸèƒ½ä¹‹å‰ï¼Œéœ€è¦å®Œæˆä»¥ä¸‹å‡†å¤‡å·¥ä½œï¼š

### 1. å‡†å¤‡ API æ ¼å¼çš„ JSON å·¥ä½œæµæ–‡ä»¶

#### æ­¥éª¤ä¸€ï¼šç¡®ä¿å·¥ä½œæµåŒ…å«è¾“å‡ºèŠ‚ç‚¹

å¯¹äºå›¾ç‰‡å·¥ä½œæµï¼Œå¿…é¡»åŒ…å«ä¸€ä¸ª **Save Image** æˆ– **Preview Image** èŠ‚ç‚¹æ¥è¾“å‡ºç»“æœã€‚

![ç¤ºä¾‹å›¾ç‰‡](../image/setting4.png)

#### æ­¥éª¤äºŒï¼šå¯¼å‡º API æ ¼å¼çš„ JSON æ–‡ä»¶

åœ¨ ComfyUI ç•Œé¢ä¸­ï¼š

1. ç‚¹å‡»èœå•æ çš„ "Save (API Format)"
2. é€‰æ‹©ä¿å­˜ä½ç½®
3. ä¿å­˜ä¸º JSON æ ¼å¼æ–‡ä»¶

![å¯¼å‡ºæ­¥éª¤1](../image/setting1.png)  
![å¯¼å‡ºæ­¥éª¤2](../image/setting2.png)  
![å¯¼å‡ºæ­¥éª¤3](../image/setting3.png)

> âš ï¸ **é‡è¦æç¤º**ï¼šå¯¼å‡ºçš„ JSON æ–‡ä»¶ä¸­ï¼Œ**output èŠ‚ç‚¹å¿…é¡»è¿æ¥åˆ° SaveImage èŠ‚ç‚¹**ï¼Œè¿™æ˜¯æ’ä»¶æ­£å¸¸å·¥ä½œçš„å¿…è¦æ¡ä»¶ã€‚

![èŠ‚ç‚¹è¿æ¥ç¤ºä¾‹](../image/node.png)

---

## å¿«é€Ÿå¼€å§‹

### ä»€ä¹ˆæ˜¯ Reflex é…ç½®æ–‡ä»¶ï¼Ÿ

**Reflex é…ç½®æ–‡ä»¶**æ˜¯æœ¬æ’ä»¶çš„æ ¸å¿ƒï¼Œå®ƒå®šä¹‰äº†å“ªäº›èŠ‚ç‚¹å¯ä»¥è¢«åŠ¨æ€è¦†å†™ã€‚é…ç½®æ–‡ä»¶éœ€è¦ï¼š

- åç§°æ ¼å¼ï¼š`å·¥ä½œæµåç§°_reflex.json`
- æ”¾ç½®ä½ç½®ï¼šä¸å·¥ä½œæµ JSON æ–‡ä»¶æ”¾åœ¨åŒä¸€ç›®å½•ï¼ˆé»˜è®¤ä¸º `./data/comfyui/`ï¼‰

### åˆ›å»ºç¬¬ä¸€ä¸ª Reflex é…ç½®æ–‡ä»¶

å‡è®¾ä½ æœ‰ä¸€ä¸ªåä¸º `my_txt2img.json` çš„å·¥ä½œæµæ–‡ä»¶ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ª `my_txt2img_reflex.json` é…ç½®æ–‡ä»¶ï¼š

```json
{
  "output": 9,
  "sampler": 3,
  "image_size": 5,
  "prompt": 6,
  "negative_prompt": 7,
  "command": "ç»˜ç”»",
  "note": "åŸºç¡€ SDXL æ–‡ç”Ÿå›¾å·¥ä½œæµ"
}
```

### é…ç½®æ–‡ä»¶è¯´æ˜

- **é”®ï¼ˆKeyï¼‰**ï¼šè¦†å†™èŠ‚ç‚¹åç§°ï¼ˆå¦‚ `output`ã€`sampler`ã€`prompt` ç­‰ï¼‰
- **å€¼ï¼ˆValueï¼‰**ï¼šå¯¹åº” ComfyUI å¯¼å‡ºçš„ JSON æ–‡ä»¶ä¸­èŠ‚ç‚¹çš„ IDï¼ˆæ•´æ•°ï¼‰

ä¾‹å¦‚ï¼Œå¦‚æœ ComfyUI å¯¼å‡ºçš„ JSON ä¸­ï¼ŒSave Image èŠ‚ç‚¹çš„ ID æ˜¯ `9`ï¼Œåˆ™é…ç½®ä¸­åº”å†™ `"output": 9`ã€‚

### æœ€ç®€å•çš„é…ç½®ç¤ºä¾‹

æœ€å°é…ç½®åªéœ€è¦æŒ‡å®š `output` èŠ‚ç‚¹ï¼š

```json
{
  "output": 94
}
```

è™½ç„¶åªé…ç½®äº† `output` èŠ‚ç‚¹ä¹Ÿèƒ½å·¥ä½œï¼Œä½†è¿™æ ·ä½ å°±æ— æ³•é€šè¿‡å‚æ•°æ§åˆ¶å·¥ä½œæµå†…çš„å…¶ä»–å‚æ•°ï¼ˆå¦‚åˆ†è¾¨ç‡ã€æ­¥æ•°ç­‰ï¼‰ã€‚

### å¤šèŠ‚ç‚¹é…ç½®ç¤ºä¾‹

```json
{
  "prompt": 32,
  "output": 94,
  "load_image": 3,
  "negative_prompt": 7
}
```

### è¦†å†™å¤šä¸ªç›¸åŒç±»å‹çš„èŠ‚ç‚¹

```json
{
  "prompt": [114, 514],
  "output": 72,
  "sampler": 52,
  "seed": 52
}
```

ä¸Šé¢çš„é…ç½®ä¸­ï¼Œ`prompt` è¦†å†™äº†èŠ‚ç‚¹ 114 å’Œ 514ï¼Œè¿™æ„å‘³ç€è¿™ä¸¤ä¸ªèŠ‚ç‚¹éƒ½ä¼šè¢«ç”¨æˆ·è¾“å…¥çš„æç¤ºè¯æ›´æ–°ã€‚

> ğŸ’¡ **å­¦ä¹ å»ºè®®**ï¼šæ’ä»¶ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶ä¼šåˆ›å»ºä¸€äº›é»˜è®¤å·¥ä½œæµï¼ˆé»˜è®¤è·¯å¾„ï¼š`æœºå™¨äººç›®å½•/data/comfyui`ï¼‰ï¼Œå»ºè®®ç»“åˆé»˜è®¤å·¥ä½œæµå’Œæœ¬æ–‡æ¡£è¿›è¡Œå­¦ä¹ ã€‚

![å·¥ä½œæµé…ç½®ç¤ºä¾‹](../image/setting5.png)

---

## è¦†å†™èŠ‚ç‚¹è¯¦è§£

### è¦†å†™èŠ‚ç‚¹é€ŸæŸ¥è¡¨

| è¦†å†™èŠ‚ç‚¹åç§° | æ˜¯å¦å¿…é¡» | è¦†å†™çš„å‚æ•° | å¯¹åº” ComfyUI èŠ‚ç‚¹ | æƒé™ |
|:-----------:|:------:|:---------:|:---------------:|:---:|
| `output` | âœ… **æ˜¯** | æ— ï¼ˆå…³é”®èŠ‚ç‚¹ï¼‰ | Save Image / Preview Image | all |
| `sampler` | å¦ | seed, steps, cfg, sampler_name, scheduler, denoise | KSampler | all |
| `seed` | å¦ | seed | ä»»ä½•æœ‰ seed çš„èŠ‚ç‚¹ | all |
| `image_size` | å¦ | width, height, batch_size | EmptyLatentImage | all |
| `prompt` | å¦ | textï¼ˆæ­£é¢æç¤ºè¯ï¼‰ | CLIPTextEncode | all |
| `negative_prompt` | å¦ | textï¼ˆè´Ÿé¢æç¤ºè¯ï¼‰ | CLIPTextEncode | all |
| `checkpoint` | å¦ | ckpt_name | CheckpointLoaderSimple | all |
| `load_image` | å¦ | image | LoadImage | all |
| `tipo` | å¦ | width, height, seed, tags | TIPO | all |
| `override` | å¦ | å­—å…¸ï¼Œæ”¯æŒå¤šä¸ªé”®ï¼ˆè§ä¸‹æ–‡ï¼‰ | å·¥ä½œæµé»˜è®¤å‚æ•° | all |
| `note` | å¦ | å­—ç¬¦ä¸²ï¼Œå·¥ä½œæµå¤‡æ³¨ | - | all |
| `media` | å¦ | å­—ç¬¦ä¸²ï¼ˆimage/video/textï¼‰ | æ ‡è®°è¾“å‡ºç±»å‹ | all |
| `command` | å¦ | å­—ç¬¦ä¸²ï¼Œæ³¨å†Œä¸ºå‘½ä»¤ | - | all |
| `reg_args` | å¦ | å­—å…¸ï¼Œä¸ºå‘½ä»¤æ·»åŠ è‡ªå®šä¹‰å‚æ•° | - | all |
| `available` | å¦ | åˆ—è¡¨ï¼ŒæŒ‡å®šå¯ç”¨åç«¯ | - | all |
| `daylimit` | å¦ | æ•´æ•°ï¼Œæ¯æ—¥è°ƒç”¨æ¬¡æ•°é™åˆ¶ | - | all |
| `reflex` | å¦ | å­—å…¸ï¼Œåç«¯ç‰¹å®šèŠ‚ç‚¹å€¼ | - | all |
| `admin` | å¦ | å¸ƒå°”ï¼Œä»…ç®¡ç†å‘˜å¯ç”¨ | - | all |
| `group` | å¦ | åˆ—è¡¨ï¼Œä»…æŒ‡å®šç¾¤å¯ç”¨ | - | all |

### èŠ‚ç‚¹é«˜çº§æ“ä½œé€ŸæŸ¥è¡¨

| è¦†å†™æ“ä½œ | éœ€è¦é¢å¤–å‚æ•° | å‚æ•°è¯´æ˜ | è¯´æ˜ |
|:-------:|:---------:|:-------:|:---:|
| `randint` | å¦ | - | éšæœºç”Ÿæˆä¸€ä¸ªæ•´æ•° |
| `append_prompt` | å¦ | - | å°†å·¥ä½œæµä¸­è‡ªå¸¦çš„æ­£é¢æç¤ºè¯æ·»åŠ åˆ°è¾“å…¥ä¸­ |
| `append_negative_prompt` | å¦ | - | å°†å·¥ä½œæµä¸­è‡ªå¸¦çš„è´Ÿé¢æç¤ºè¯æ·»åŠ åˆ°è¾“å…¥ä¸­ |
| `replace_prompt` | å¦ | - | å°†è¾“å…¥æç¤ºè¯æ›¿æ¢åˆ°å·¥ä½œæµä¸­çš„ `{prompt}` ä¸­ |
| `replace_negative_prompt` | å¦ | - | å°†è¾“å…¥è´Ÿé¢æç¤ºè¯æ›¿æ¢åˆ°å·¥ä½œæµä¸­çš„ `{prompt}` ä¸­ |
| `upscale` | æ˜¯ | `upscale_1.5` | å¯¹æ•°å­—è¿›è¡Œä¹˜ç®—ï¼Œæ•°å­—ä¸ºå€ç‡ |
| `value` | æ˜¯ | `value_ä½ çš„å€¼_å€¼çš„ç±»å‹` | å›ºå®šå·¥ä½œæµä¸­çš„æ•°å€¼ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰ |
| `image` | æ˜¯ | `image_0` | é€‚ç”¨äºéœ€è¦åŠ è½½å¤šä¸ªå›¾ç‰‡çš„å·¥ä½œæµ |

---

### è¯¦ç»†èŠ‚ç‚¹è¯´æ˜

#### outputï¼ˆå¿…é¡»ï¼‰

**ä½œç”¨**ï¼šæŒ‡å®šè¾“å‡ºèŠ‚ç‚¹ï¼Œæ’ä»¶å¿…é¡»é€šè¿‡æ­¤èŠ‚ç‚¹è·å–ç”Ÿæˆç»“æœã€‚

**æ”¯æŒçš„èŠ‚ç‚¹ç±»å‹**ï¼š
- Save Image èŠ‚ç‚¹
- Preview Image èŠ‚ç‚¹
- Show Text èŠ‚ç‚¹ï¼ˆæ–‡å­—è¾“å‡ºï¼‰
- Video èŠ‚ç‚¹ï¼ˆè§†é¢‘è¾“å‡ºï¼‰

**åŸºç¡€é…ç½®**ï¼š

```json
{
  "output": 9
}
```

![output èŠ‚ç‚¹ç¤ºä¾‹1](../image/output.png) 
![output èŠ‚ç‚¹ç¤ºä¾‹2](../image/output2.png)

**æ··åˆè¾“å‡ºæ¨¡å¼**ï¼š

å¯ä»¥åŒæ—¶è¾“å‡ºå¤šç§ç±»å‹çš„åª’ä½“ï¼ˆå›¾ç‰‡ã€æ–‡å­—ã€è§†é¢‘ï¼‰ï¼š

```json
{
  "output": {
    "image": [31, 32],
    "text": [33],
    "video": [34]
  }
}
```

è¯´æ˜ï¼š
- èŠ‚ç‚¹ 31 å’Œ 32 æ˜¯å›¾ç‰‡è¾“å‡ºèŠ‚ç‚¹ï¼ˆSave Image æˆ– Preview Imageï¼‰
- èŠ‚ç‚¹ 33 æ˜¯æ–‡å­—è¾“å‡ºèŠ‚ç‚¹
- èŠ‚ç‚¹ 34 æ˜¯è§†é¢‘è¾“å‡ºèŠ‚ç‚¹
- æœºå™¨äººä¼šåŒæ—¶è¾“å‡º 2 å¼ å›¾ç‰‡ã€1 æ®µæ–‡å­—ã€1 æ®µè§†é¢‘

#### sampler

**ä½œç”¨**ï¼šæ§åˆ¶é‡‡æ ·å™¨ç›¸å…³å‚æ•°ï¼ŒåŒ…æ‹¬ seedã€stepsã€cfgã€sampler_nameã€schedulerã€denoiseã€‚

**å¯¹åº”èŠ‚ç‚¹**ï¼šComfyUI çš„ KSampler èŠ‚ç‚¹

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "sampler": 9
}
```

![sampler èŠ‚ç‚¹ç¤ºä¾‹1](../image/sampler.png)
![sampler èŠ‚ç‚¹ç¤ºä¾‹2](../image/sampler2.png)

#### seed

**ä½œç”¨**ï¼šè¦†å†™èŠ‚ç‚¹ä¸­çš„ seed / noise_seed å‚æ•°ã€‚

**æ³¨æ„**ï¼šå¦‚æœä½ å‘ç°ç”Ÿæˆçš„å›¾ç‰‡ä¸€ç›´æ˜¯åŒä¸€å¼ ï¼Œå¾ˆå¯èƒ½æ˜¯æ²¡æœ‰è¦†å†™ seed èŠ‚ç‚¹ã€‚

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "seed": 9
}
```

![seed èŠ‚ç‚¹ç¤ºä¾‹1](../image/seed.png)
![seed èŠ‚ç‚¹ç¤ºä¾‹2](../image/seed2.png)

#### image_size

**ä½œç”¨**ï¼šæ§åˆ¶å›¾ç‰‡å°ºå¯¸å’Œæ‰¹æ¬¡æ•°é‡ï¼Œå¯¹åº” ComfyUI çš„ EmptyLatentImage èŠ‚ç‚¹ã€‚

**æ§åˆ¶çš„å‚æ•°**ï¼šwidthï¼ˆå®½åº¦ï¼‰ã€heightï¼ˆé«˜åº¦ï¼‰ã€batch_sizeï¼ˆæ¯æ‰¹å¼ æ•°ï¼‰

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "image_size": 4
}
```

![image_size èŠ‚ç‚¹ç¤ºä¾‹1](../image/image_size.png)
![image_size èŠ‚ç‚¹ç¤ºä¾‹2](../image/image_size2.png)

#### prompt / negative_prompt

**ä½œç”¨**ï¼šæ§åˆ¶æ­£é¢æç¤ºè¯å’Œè´Ÿé¢æç¤ºè¯ï¼Œå¯ä»¥æ˜¯ä»»ä½•éœ€è¦è¾“å…¥ text çš„èŠ‚ç‚¹ã€‚

**å¯¹åº”èŠ‚ç‚¹**ï¼šCLIPTextEncode èŠ‚ç‚¹æˆ–å…¶ä»–æ–‡æœ¬è¾“å…¥èŠ‚ç‚¹

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "prompt": 6,
  "negative_prompt": 7
}
```

![æ­£é¢æç¤ºè¯ç¤ºä¾‹](../image/positive.png)
![è´Ÿé¢æç¤ºè¯ç¤ºä¾‹](../image/negative.png)
![æ–‡æœ¬èŠ‚ç‚¹ç¤ºä¾‹](../image/text.png)

#### checkpoint

**ä½œç”¨**ï¼šæ§åˆ¶æ¨¡å‹é€‰æ‹©ï¼Œå¯¹åº” ComfyUI çš„ CheckpointLoaderSimple èŠ‚ç‚¹ã€‚

**é…ç½®å**ï¼šå¯ä»¥ä½¿ç”¨ `-m` å‚æ•°æ¥æŒ‡å®šæ¨¡å‹ã€‚

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "checkpoint": 45
}
```

![checkpoint èŠ‚ç‚¹ç¤ºä¾‹1](../image/ckpt.png)
![checkpoint èŠ‚ç‚¹ç¤ºä¾‹2](../image/ckpt2.png)

#### load_image

**ä½œç”¨**ï¼šåŠ è½½å›¾åƒèŠ‚ç‚¹ï¼Œå¯¹åº” ComfyUI çš„ LoadImage èŠ‚ç‚¹ã€‚

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "load_image": 17
}
```

![load_image èŠ‚ç‚¹ç¤ºä¾‹1](../image/uploadimg.png)
![load_image èŠ‚ç‚¹ç¤ºä¾‹2](../image/uploadimg2.png)

#### override

**ä½œç”¨**ï¼šä¸ºå·¥ä½œæµè®¾ç½®é»˜è®¤å‚æ•°ï¼Œåœ¨å·¥ä½œæµè¢«è°ƒç”¨æ—¶è‡ªåŠ¨åº”ç”¨è¿™äº›å‚æ•°ã€‚

**æ”¯æŒçš„å‚æ•°é”®**ï¼š
- `prompt`ï¼šæç¤ºè¯
- `negative_prompt`ï¼šè´Ÿé¢æç¤ºè¯
- `accept_ratio`ï¼šç”»å¹…æ¯”ä¾‹ï¼ˆå¦‚ "2:1"ï¼‰
- `seed`ï¼šç§å­
- `steps`ï¼šè¿­ä»£æ­¥æ•°
- `cfg_scale`ï¼šCFG å€¼
- `denoise_strength`ï¼šé™å™ªå¼ºåº¦
- `height`ï¼šå›¾åƒé«˜åº¦
- `width`ï¼šå›¾åƒå®½åº¦
- `work_flows`ï¼šé€‰æ‹©çš„å·¥ä½œæµ
- `sampler`ï¼šé‡‡æ ·å™¨
- `scheduler`ï¼šè°ƒåº¦å™¨
- `batch_size`ï¼šæ¯æ‰¹æ¬¡æ•°é‡
- `batch_count`ï¼šæ€»æ‰¹æ¬¡
- `model`ï¼šæ¨¡å‹
- `override`ï¼šä¸ä½¿ç”¨å†…ç½®æ­£é¢æç¤ºè¯
- `override_ng`ï¼šä¸ä½¿ç”¨å†…ç½®è´Ÿé¢æç¤ºè¯
- `forward`ï¼šè½¬å‘æ¶ˆæ¯
- `concurrency`ï¼šå¹¶å‘
- `shape`ï¼šé»˜è®¤åˆ†è¾¨ç‡ï¼ˆå¦‚ "832x1216"ï¼‰
- `silent`ï¼šé™é»˜ç”Ÿå›¾
- `notice`ï¼šæ‰§è¡Œå®Œæˆåé€šçŸ¥
- `no_trans`ï¼šä¸ç¿»è¯‘æç¤ºè¯

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "override": {
    "prompt": "",
    "negative_prompt": "",
    "accept_ratio": "2:1",
    "seed": 123456,
    "steps": 35,
    "cfg_scale": 7.5,
    "denoise_strength": 0.7,
    "height": 512,
    "width": 768,
    "work_flows": "default",
    "sampler": "Euler a",
    "scheduler": "normal",
    "batch_size": 1,
    "batch_count": 1,
    "model": "stable-diffusion-v1-5.ckpt",
    "override": false,
    "override_ng": false,
    "forward": false,
    "concurrency": false,
    "shape": "832x1216",
    "silent": false,
    "notice": false,
    "no_trans": false
  }
}
```

**ä¼˜å…ˆçº§è¯´æ˜**ï¼š
- ä½¿ç”¨æ­¤å·¥ä½œæµæ—¶ï¼Œä¼šé»˜è®¤ä½¿ç”¨ä»¥ä¸Šå‚æ•°
- å¦‚æœæ‰‹åŠ¨æŒ‡å®šå‚æ•°ï¼Œæ‰‹åŠ¨å‚æ•°ä¼˜å…ˆçº§æ›´é«˜
- ä¾‹å¦‚ï¼š`prompt nahida` ä¼šä½¿ç”¨é»˜è®¤å‚æ•°ï¼ˆsteps: 35, cfg_scale: 7.5ï¼‰
- ä½† `prompt nahida --steps 28` ä¼šè¦†ç›– steps å‚æ•°ï¼Œæœ€ç»ˆä½¿ç”¨ steps: 28

#### note

**ä½œç”¨**ï¼šä¸ºå·¥ä½œæµæ·»åŠ å¤‡æ³¨è¯´æ˜ï¼Œä¼šåœ¨æŸ¥çœ‹å·¥ä½œæµå‘½ä»¤ä¸­æ˜¾ç¤ºã€‚

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "note": "è¿™æ˜¯ä¸€ä¸ªåŸºç¡€å·¥ä½œæµ"
}
```

#### media

**ä½œç”¨**ï¼šæ ‡è®°æ­¤å·¥ä½œæµçš„è¾“å‡ºç±»å‹ï¼ˆimage/text/videoï¼‰ï¼Œä¸å¡«å†™åˆ™é»˜è®¤ä¸ºå›¾ç‰‡ã€‚

**æ³¨æ„**ï¼šä¸æ¨èå•ç‹¬ä½¿ç”¨ï¼Œå»ºè®®ä½¿ç”¨ä¸Šé¢ `output` èŠ‚ç‚¹æåˆ°çš„æ··åˆè¾“å‡ºæ¨¡å¼ã€‚

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "media": "text"
}
```

ä¾‹å¦‚ä¸€ä¸ªæ‰“æ ‡å·¥ä½œæµï¼š

![æ‰“æ ‡å·¥ä½œæµç¤ºä¾‹](../image/tagger.png)

#### command

**ä½œç”¨**ï¼šå°†å·¥ä½œæµæ³¨å†Œä¸ºå‘½ä»¤ï¼Œæ³¨å†Œåå¯ä»¥é€šè¿‡å‘½ä»¤åç›´æ¥è°ƒç”¨è¯¥å·¥ä½œæµã€‚

**é…ç½®ç¤ºä¾‹ï¼ˆå•ä¸ªå‘½ä»¤åï¼‰**ï¼š

```json
{
  "media": "text",
  "output": 87,
  "command": "æ‰“æ ‡",
  "load_image": 85
}
```

**é…ç½®ç¤ºä¾‹ï¼ˆå¤šä¸ªåˆ«åï¼‰**ï¼š

```json
{
  "media": "text",
  "output": 87,
  "command": ["æ‰“æ ‡", "tagger", "åˆ†æ"],
  "load_image": 85
}
```

**è¯´æ˜**ï¼š
- æ³¨å†Œä¸ºå‘½ä»¤åï¼Œå…¶ä»–å‚æ•°ä¾ç„¶ç”Ÿæ•ˆ
- ä¾‹å¦‚ï¼š`æ‰“æ ‡ --steps 28` è¿™æ ·çš„å‘½ä»¤ä¹Ÿæ˜¯æœ‰æ•ˆçš„
- å‘½ä»¤åå¯ä»¥ä¸å’Œå·¥ä½œæµåç§°ç›¸åŒ

![command ç¤ºä¾‹1](../image/command.png)
![command ç¤ºä¾‹2](../image/command2.png)

#### reg_argsï¼ˆé«˜çº§åŠŸèƒ½ï¼‰

**ä½œç”¨**ï¼šä¸ºæ³¨å†Œçš„å‘½ä»¤æ·»åŠ è‡ªå®šä¹‰å‚æ•°ï¼Œå…è®¸é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æ§åˆ¶å·¥ä½œæµä¸­çš„ç‰¹å®šèŠ‚ç‚¹å‚æ•°ã€‚

**é€‚ç”¨åœºæ™¯**ï¼šå½“ä½ æƒ³è¦æ§åˆ¶æŸä¸ªå‚æ•°ï¼Œä½†é»˜è®¤çš„èŠ‚ç‚¹è¦†å†™æ²¡æœ‰æä¾›æ—¶ã€‚

**æ³¨æ„äº‹é¡¹**ï¼š
- `type` ä½¿ç”¨ Python çš„æ•°æ®ç±»å‹ï¼ˆint, str, float, bool ç­‰ï¼‰

**é…ç½®ç¤ºä¾‹ï¼ˆæ‰©å›¾å·¥ä½œæµï¼‰**ï¼š

```json
{
  "load_image": 17,
  "output": 9,
  "command": "æ‰©å›¾",
  "note": "flux-fillæ‰©å›¾, å»ºè®®æ‰©å›¾åˆ†è¾¨ç‡ä¸è¦è¶…è¿‡200",
  "reg_args": {
    "44": {
      "args": [
        {
          "name_or_flags": ["-opl"],
          "type": "int",
          "dest": "left_unique",
          "help": "å‘å·¦æ‰©å›¾",
          "default": 0,
          "dest_to_value": {"left_unique": "left"}
        },
        {
          "name_or_flags": ["-opr"],
          "type": "int",
          "dest": "right",
          "help": "å‘å³æ‰©å›¾",
          "default": 0
        },
        {
          "name_or_flags": ["-opt"],
          "type": "int",
          "dest": "top",
          "help": "å‘ä¸Šæ‰©å›¾",
          "default": 128
        },
        {
          "name_or_flags": ["-opb"],
          "type": "int",
          "dest": "bottom",
          "help": "å‘ä¸‹æ‰©å›¾",
          "default": 128
        },
        {
          "name_or_flags": ["-ft"],
          "type": "int",
          "dest": "feathering",
          "help": "ç¾½åŒ–åŠå¾„",
          "default": 30
        }
      ]
    }
  }
}
```

![reg_args ç¤ºä¾‹1](../image/reg.png)
![reg_args ç¤ºä¾‹2](../image/reg2.png)

**è‡ªå®šä¹‰é¢„è®¾å‚æ•°**ï¼š

ä¸ºäº†æ–¹ä¾¿è‡ªå®šä¹‰å‚æ•°ï¼Œæ’ä»¶æ”¯æŒé¢„è®¾å‚æ•°æ˜ å°„åŠŸèƒ½ï¼š

```json
{
  "reg_args": {
    "21": {
      "args": [
        {
          "name_or_flags": ["-cn"],
          "type": "float",
          "dest": "strength",
          "help": "æ§åˆ¶å¼ºåº¦",
          "default": 0.8,
          "preset": {
            "default": 0.8,
            "low": 0.5,
            "mid": 0.8,
            "high": 1.0
          }
        }
      ]
    }
  }
}
```

ä½¿ç”¨ç¤ºä¾‹ï¼š`-cn low` ä¼šå°†æ§åˆ¶å¼ºåº¦è®¾å®šä¸º 0.5ã€‚

#### available

**ä½œç”¨**ï¼šåœ¨å¤šåç«¯å·¥ä½œæ¨¡å¼ä¸­ï¼ŒæŒ‡å®šæ­¤å·¥ä½œæµå¯ä»¥åœ¨å“ªäº›åç«¯æ‰§è¡Œã€‚

**ä½¿ç”¨åœºæ™¯**ï¼š
- æŸäº›å·¥ä½œæµéœ€è¦çš„æ¨¡å‹åªå­˜åœ¨äºç‰¹å®šåç«¯
- å½“èƒ½æ‰§è¡Œæ­¤å·¥ä½œæµçš„åç«¯ä¸åœ¨çº¿æ—¶ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸æé†’
- å½“æ‰‹åŠ¨é€‰æ‹©ä¸èƒ½æ‰§è¡Œæ­¤å·¥ä½œæµçš„åç«¯æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°èƒ½æ‰§è¡Œçš„åç«¯

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "available": [0, 1]
}
```

**è¯´æ˜**ï¼š
- å¦‚æœä½ çš„ `comfyui_url_list` ä¸ºï¼š
  ```
  [
    "http://127.0.0.1:8188",
    "http://127.0.0.1:8288",
    "http://127.0.0.1:8388"
  ]
  ```
- é‚£ä¹ˆï¼š
  - 0 å·åç«¯ = `http://127.0.0.1:8188`
  - 1 å·åç«¯ = `http://127.0.0.1:8288`
  - 2 å·åç«¯ = `http://127.0.0.1:8388`
- æ­¤å·¥ä½œæµåªèƒ½åœ¨ 0 å·å’Œ 1 å·åç«¯æ‰§è¡Œ

#### daylimit

**ä½œç”¨**ï¼šé™åˆ¶å·¥ä½œæµæ¯å¤©å¯ä»¥è°ƒç”¨çš„æ¬¡æ•°ã€‚

**é€‚ç”¨åœºæ™¯**ï¼šæŸäº›å·¥ä½œæµæ¶ˆè€—æ—¶é—´å¤ªé•¿ï¼Œä¸ºäº†é¿å…ç”¨æˆ·é¢‘ç¹è°ƒç”¨ã€‚

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "daylimit": 2
}
```

è¯´æ˜ï¼šæ­¤å·¥ä½œæµæ¯å¤©åªèƒ½è°ƒç”¨ 2 æ¬¡ã€‚

#### reflex

**ä½œç”¨**ï¼šåœ¨å¤šåç«¯å·¥ä½œæ¨¡å¼ä¸­ï¼Œä¸ºä¸åŒåç«¯æŒ‡å®šä¸åŒçš„èŠ‚ç‚¹å‚æ•°å€¼ã€‚

**ä½¿ç”¨åœºæ™¯**ï¼š
- ä¸åŒåç«¯å¯èƒ½æ‹¥æœ‰ç›¸åŒåŠŸèƒ½ä½†åç§°ä¸åŒçš„æ¨¡å‹
- ä¾‹å¦‚ï¼š1 å·åç«¯æœ‰ `noob1.safetensors`ï¼Œ2 å·åç«¯æœ‰ `noob_eps_1.safetensors`
- å®ƒä»¬å®é™…æ˜¯åŒä¸€ä¸ªæ¨¡å‹ï¼Œä½†ä½¿ç”¨ API JSON è¯·æ±‚æ—¶ä¼šæŠ¥é”™æ‰¾ä¸åˆ°æ¨¡å‹

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "reflex": {
    "0": {
      "4": {
        "ckpt_name": "NoobXL-EPS-v1.1.safetensors"
      }
    }
  }
}
```

è¯´æ˜ï¼šå½“æ­¤å·¥ä½œæµè¯·æ±‚åˆ° 0 å·åç«¯æ—¶ï¼Œä¸º 4 å·èŠ‚ç‚¹çš„ `ckpt_name` å‚æ•°åº”ç”¨ `NoobXL-EPS-v1.1.safetensors`ã€‚

#### loraï¼ˆè‡ªåŠ¨åŠ è½½ï¼‰

**ä½œç”¨**ï¼šé…åˆ `comfyui_auto_lora` ä½¿ç”¨ï¼Œè‡ªåŠ¨åŠ è½½ LoRA æ¨¡å‹ã€‚

**æ³¨æ„äº‹é¡¹**ï¼š
- ä½¿ç”¨æ­¤åŠŸèƒ½æ—¶ï¼ŒèŠ‚ç‚¹ ID ä¼šç´¯åŠ ï¼ˆç¬¬ä¸€ä¸ª LoRA #11ï¼Œç¬¬äºŒä¸ª #12ï¼Œä»¥æ­¤ç±»æ¨ï¼‰
- å¦‚æœå’Œå…¶ä»–èŠ‚ç‚¹ ID å†²çªä¼šæŠ¥é”™ï¼Œå»ºè®®å°†èŠ‚ç‚¹ ID è®¾ç½®å¾—è¾ƒå¤§ä¸€äº›
- åªæœ‰å½“ `comfyui_auto_lora` å¯åŠ¨æ—¶ï¼Œæ­¤åŠŸèƒ½æ‰æœ‰æ•ˆ

**æ–¹å¼ä¸€ï¼šå·¥ä½œæµå·²æœ‰ LoRA åŠ è½½èŠ‚ç‚¹**

```json
{
  "lora": 11
}
```

ä½¿ç”¨ï¼š`prompt "<lora:nikki:1.1>, <lora:chenbin:1.1>"` ä¼šè‡ªåŠ¨åŠ è½½ nikki å’Œ chenbin LoRA æ¨¡å‹ã€‚

**æ–¹å¼äºŒï¼šå·¥ä½œæµæ²¡æœ‰ LoRA åŠ è½½èŠ‚ç‚¹**

å¯¼å‡ºå·¥ä½œæµæ—¶**ä¸éœ€è¦**åŒ…å« LoRA åŠ è½½èŠ‚ç‚¹ï¼Œé…ç½®å¦‚ä¸‹ï¼š

```json
{
  "lora": [
    {
      "11": {
        "from": {
          "model": 4,
          "clip": 4
        },
        "to": {
          "model": [3],
          "clip": [6, 7]
        }
      }
    }
  ]
}
```

è¯´æ˜ï¼šæ‰‹åŠ¨åˆ†é…èŠ‚ç‚¹ ID 11ï¼Œå¹¶æŒ‡å®šè¿æ¥å…³ç³»ã€‚

![lora é…ç½®ç¤ºä¾‹](../image/lora.png)

#### admin

**ä½œç”¨**ï¼šé™åˆ¶å·¥ä½œæµåªèƒ½è¢«ç®¡ç†å‘˜ç”¨æˆ·ä½¿ç”¨ã€‚

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "admin": true
}
```

#### group

**ä½œç”¨**ï¼šé™åˆ¶å·¥ä½œæµåªèƒ½åœ¨æŒ‡å®šçš„ç¾¤ç»„ä¸­ä½¿ç”¨ã€‚

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "group": [114514, 200224]
}
```

è¯´æ˜ï¼šåªæœ‰åœ¨ç¾¤ 114514 å’Œ 200224 ä¸­æ‰èƒ½ä½¿ç”¨æ­¤å·¥ä½œæµã€‚

---

## é«˜çº§èŠ‚ç‚¹è¦†å†™æ“ä½œ

é«˜çº§èŠ‚ç‚¹è¦†å†™æ“ä½œå…è®¸ä½ å¯¹èŠ‚ç‚¹çš„ç‰¹å®šå‚æ•°è¿›è¡Œæ›´ç²¾ç»†çš„æ§åˆ¶ã€‚

### è¦†å†™æ ¼å¼è¯´æ˜

**åŸºç¡€æ ¼å¼**ï¼ˆè¦†å†™å•ä¸ªèŠ‚ç‚¹ï¼‰ï¼š

```json
{
  "èŠ‚ç‚¹ç±»å‹": èŠ‚ç‚¹ID
}
```

**è¦†å†™å¤šä¸ªèŠ‚ç‚¹**ï¼š

```json
{
  "èŠ‚ç‚¹ç±»å‹": [èŠ‚ç‚¹ID1, èŠ‚ç‚¹ID2]
}
```

**é«˜çº§è¦†å†™æ ¼å¼**ï¼ˆå¯¹èŠ‚ç‚¹å‚æ•°è¿›è¡Œç‰¹æ®Šæ“ä½œï¼‰ï¼š

```json
{
  "èŠ‚ç‚¹ç±»å‹": {
    "èŠ‚ç‚¹ID": {
      "override": {
        "å‚æ•°å": "æ“ä½œ"
      }
    }
  }
}
```

![é«˜çº§èŠ‚ç‚¹æ§åˆ¶ç¤ºä¾‹](../image/advance_node_control.png)

### append_prompt / append_negative_prompt

**ä½œç”¨**ï¼šå°†å·¥ä½œæµ JSON æ–‡ä»¶ä¸­æœ¬èº«å¸¦æœ‰çš„æç¤ºè¯/è´Ÿé¢æç¤ºè¯åŠ å…¥åˆ°ç”¨æˆ·è¾“å…¥çš„æç¤ºè¯ä¸­ã€‚

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "prompt": {
    "83": {
      "override": {
        "text": "append_prompt"
      }
    }
  },
  "negative_prompt": {
    "7": {
      "override": {
        "text": "append_negative_prompt"
      }
    }
  },
  "output": 85
}
```

**å¤æ‚ç¤ºä¾‹**ï¼ˆè¦†å†™å¤šä¸ªèŠ‚ç‚¹ï¼‰ï¼š

```json
{
  "prompt": {
    "399": {
      "override": {
        "text": "append_prompt"
      }
    }
  },
  "negative_prompt": {
    "400": {
      "override": {
        "text": "append_negative_prompt"
      }
    }
  },
  "seed": [291, 127, 276],
  "image_size": {
    "395": {},
    "292": {
      "override": {
        "width": "upscale_0.75",
        "height": "upscale_0.75"
      }
    }
  },
  "output": 458
}
```

![append_prompt ç¤ºä¾‹1](../image/append_prompt.png)
![append_prompt ç¤ºä¾‹2](../image/append_prompt2.png)

### replace_prompt / replace_negative_prompt

**ä½œç”¨**ï¼šå°†ç”¨æˆ·è¾“å…¥çš„æç¤ºè¯æ›¿æ¢åˆ°å·¥ä½œæµ JSON æ–‡ä»¶ä¸­çš„ `{prompt}` å ä½ç¬¦ä¸­ã€‚

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "prompt": {
    "25": {
      "override": {
        "text": "replace_prompt"
      }
    }
  }
}
```

![replace_prompt ç¤ºä¾‹](../image/replace.png)

### imageï¼ˆå¤šå›¾ç‰‡è¾“å…¥ï¼‰

**ä½œç”¨**ï¼šé€‚ç”¨äºéœ€è¦è¾“å…¥å¤šä¸ªå›¾ç‰‡çš„å·¥ä½œæµï¼Œä¸ºä¸åŒçš„ LoadImage èŠ‚ç‚¹åˆ†é…ä¸åŒçš„å›¾ç‰‡ã€‚

**é…ç½®ç¤ºä¾‹**ï¼š

```json
{
  "image": {
    "50": {
      "override": {
        "image": "image_0"
      }
    },
    "52": {
      "override": {
        "image": "image_1"
      }
    }
  }
}
```

è¯´æ˜ï¼š
- èŠ‚ç‚¹ 50 ä½¿ç”¨ç¬¬ä¸€å¼ ä¸Šä¼ çš„å›¾ç‰‡
- èŠ‚ç‚¹ 52 ä½¿ç”¨ç¬¬äºŒå¼ ä¸Šä¼ çš„å›¾ç‰‡

---

## å®Œæ•´é…ç½®ç¤ºä¾‹

### åŸºç¡€æ–‡ç”Ÿå›¾å·¥ä½œæµ

```json
{
  "output": 9,
  "sampler": 3,
  "image_size": 5,
  "prompt": 6,
  "negative_prompt": 7,
  "command": "ç»˜ç”»",
  "note": "åŸºç¡€ SDXL æ–‡ç”Ÿå›¾å·¥ä½œæµ"
}
```

### ä»¥å›¾ç”Ÿå›¾å·¥ä½œæµ

```json
{
  "prompt": 32,
  "output": 94,
  "load_image": 3,
  "negative_prompt": 7
}
```

### å¤æ‚å·¥ä½œæµï¼ˆåŒ…å«å¤šä¸ªç›¸åŒç±»å‹èŠ‚ç‚¹ï¼‰

```json
{
  "tipo": 50,
  "sampler": 52,
  "seed": 52,
  "image_size": 53,
  "output": 72
}
```

### ä½¿ç”¨ override è®¾ç½®é»˜è®¤å‚æ•°

```json
{
  "prompt": [114, 514],
  "output": 72,
  "override": {
    "sampler": "ddim",
    "steps": 30
  },
  "note": "æ–‡ç”Ÿå›¾å·¥ä½œæµ"
}
```

è¯´æ˜ï¼šé€‰æ‹©æ­¤å·¥ä½œæµæ—¶ï¼Œé»˜è®¤ä½¿ç”¨ ddim é‡‡æ ·å™¨å’Œ 30 æ­¥ï¼Œä½†å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°è¦†ç›–ã€‚

---

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆç”Ÿæˆçš„å›¾ç‰‡ä¸€ç›´æ˜¯åŒä¸€å¼ ï¼Ÿ

A: å¾ˆå¯èƒ½æ˜¯æ²¡æœ‰è¦†å†™ `seed` èŠ‚ç‚¹ã€‚æ·»åŠ  `"seed": èŠ‚ç‚¹ID` åˆ°é…ç½®æ–‡ä»¶ä¸­ã€‚

### Q: å¿…é¡»é…ç½®æ‰€æœ‰èŠ‚ç‚¹å—ï¼Ÿ

A: ä¸æ˜¯ã€‚åªæœ‰ `output` èŠ‚ç‚¹æ˜¯å¿…é¡»çš„ï¼Œå…¶ä»–èŠ‚ç‚¹æ ¹æ®ä½ çš„éœ€æ±‚é€‰æ‹©æ€§åœ°é…ç½®ã€‚å¦‚æœä¸é…ç½®æŸä¸ªèŠ‚ç‚¹ï¼Œå°±æ— æ³•é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æ§åˆ¶è¯¥èŠ‚ç‚¹çš„å‚æ•°ã€‚

### Q: å¦‚ä½•æ‰¾åˆ°èŠ‚ç‚¹çš„ IDï¼Ÿ

A: åœ¨ ComfyUI å¯¼å‡ºçš„ JSON æ–‡ä»¶ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªæ•°å­— IDã€‚åœ¨ ComfyUI ç•Œé¢ä¸­ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°èŠ‚ç‚¹çš„ IDã€‚

### Q: è¦†å†™çš„ä¼˜å…ˆçº§æ˜¯ä»€ä¹ˆï¼Ÿ

A: å‘½ä»¤è¡Œå‚æ•° > override é»˜è®¤å‚æ•° > å·¥ä½œæµ JSON ä¸­çš„åŸå§‹å‚æ•°ã€‚

---

**æç¤º**ï¼šæ›´å¤šç¤ºä¾‹è¯·å‚è€ƒä»“åº“å†…çš„ `comfyui_work_flows` ç›®å½•å’Œæ’ä»¶é»˜è®¤ç”Ÿæˆçš„å·¥ä½œæµæ–‡ä»¶ã€‚
